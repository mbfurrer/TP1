(this["webpackJsonp@galicia/react-nave"]=this["webpackJsonp@galicia/react-nave"]||[]).push([[15],{447:function(e,t,i){},486:function(e,t,i){"use strict";i.r(t);var s=i(0),n=i.n(s),r=i(1),a=(i(447),i(10)),o=i(3),l=i(15);class c extends r.Container{constructor(e){super(e),this.carruselItemActive=()=>{var e;if(!(null===(e=this.props)||void 0===e?void 0:e.isInEditor)){var t;let e=window.location.hash.split("-"),i=e[1]?null===(t=e[1])||void 0===t?void 0:t.trim():"";i&&this.props.cqItemsOrder.map((e,t)=>{if(this.props.cqItems[e].id===i){var s,n,r,a;const e=(null===(s=this.props.cqItemsOrder)||void 0===s?void 0:s.length)>1?(null===(n=this.containerRef)||void 0===n||null===(r=n.current)||void 0===r?void 0:r.clientWidth)*(t+1):0;this.setState({activeIndex:t+1,translateX:e,actualSize:null===(a=this.context)||void 0===a?void 0:a.size})}})}},this.setElementsNoFocusWithTab=()=>{var e,t,i,s;((null===(e=this.initialElement)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.querySelectorAll("a"))||[]).forEach(e=>{e.tabIndex=-1}),((null===(i=this.lastElement)||void 0===i||null===(s=i.current)||void 0===s?void 0:s.querySelectorAll("a"))||[]).forEach(e=>{e.tabIndex=-1})},this.callbackIntersect=e=>{const t=e[0];this.setState({isVisible:t.isIntersecting})},this.generateUniqueId=(e,t)=>{if(e)return`${e}-clone-${t}`},this.cloneElementWithUniqueId=(e,t)=>n.a.isValidElement(e)?n.a.cloneElement(e,{...e.props,id:this.generateUniqueId(e.props.id,t),key:`clone-${t}-${e.key||Math.random()}`,"data-cmp-is":void 0,"aria-describedby":void 0}):e,this.handleKeyPress=(e,t)=>{13===(e.keyCode||e.which)&&this.handleAction(t>0?"next":"prev")},this.handleClickNav=e=>{var t;let i=(null===(t=this.props.cqItemsOrder)||void 0===t?void 0:t.length)>1?this.containerRef.current.clientWidth*e:0;this.containerRef.current.style.transitionDuration="700ms",this.setState({translateX:i,activeIndex:e}),this.intervalRef.current&&clearInterval(this.intervalRef.current)},this.handleAction=e=>{var t;if(null===(t=this.containerRef)||void 0===t?void 0:t.current)if(this.containerRef.current.style.transitionDuration="700ms","prev"===e)if(this.state.activeIndex<=1)this.setState({translateX:0,activeIndex:this.props.cqItemsOrder.length});else{let e=this.containerRef.current.clientWidth*(this.state.activeIndex-1);this.setState(t=>({translateX:e,activeIndex:--t.activeIndex}))}else if("next"===e){var i;if(this.state.activeIndex>=(null===(i=this.props.cqItemsOrder)||void 0===i?void 0:i.length)){var s,n;let e=(null===(s=this.props.cqItemsOrder)||void 0===s?void 0:s.length)>1?this.containerRef.current.clientWidth*((null===(n=this.props.cqItemsOrder)||void 0===n?void 0:n.length)+1):0;this.setState({translateX:e,activeIndex:1})}else{let e=this.containerRef.current.clientWidth*(this.state.activeIndex+1);this.setState(t=>({translateX:e,activeIndex:++t.activeIndex}))}}},this.handleTransitionEnd=()=>{var e;if(this.state.activeIndex<=1){var t;this.containerRef.current.style.transitionDuration="0ms";let e=(null===(t=this.props.cqItemsOrder)||void 0===t?void 0:t.length)>1?this.containerRef.current.clientWidth*this.state.activeIndex:0;this.setState({translateX:e})}if(this.state.activeIndex>=(null===(e=this.props.cqItemsOrder)||void 0===e?void 0:e.length)){var i,s;this.containerRef.current.style.transitionDuration="0ms";let e=(null===(i=this.props.cqItemsOrder)||void 0===i?void 0:i.length)>1?this.containerRef.current.clientWidth*(null===(s=this.props.cqItemsOrder)||void 0===s?void 0:s.length):0;this.setState({translateX:e})}this.tagImpress()},this.handleTouchStart=e=>{var t;const i=null===(t=e.touches[0])||void 0===t?void 0:t.clientX;this.setState({touchPosition:i})},this.handleTouchMove=e=>{var t;const i=this.state.touchPosition;if(null===i)return;const s=i-(null===(t=e.touches[0])||void 0===t?void 0:t.clientX);s>5&&this.handleAction("next"),s<-5&&this.handleAction("prev"),this.setState({touchPosition:null})},this.handleOnHover=()=>{var e;(null===(e=this.props)||void 0===e?void 0:e.autopauseDisabled)||this.setState({onHover:!this.state.onHover})},this.timerRef=n.a.createRef(),this.containerRef=n.a.createRef(),this.intervalRef=n.a.createRef(),this.carouselRef=n.a.createRef(),this.initialElement=n.a.createRef(),this.lastElement=n.a.createRef(),this.state={componentMapping:this.props.componentMapping||r.ComponentMapping,activeIndex:1,translateX:0,onHover:!1,touchPosition:null,impression:[],io:null,isVisible:!1}}componentDidMount(){var e,t,i,s;const n=(null===(e=this.props.cqItemsOrder)||void 0===e?void 0:e.length)>1?(null===(t=this.containerRef)||void 0===t||null===(i=t.current)||void 0===i?void 0:i.clientWidth)*this.state.activeIndex:0;this.setState({translateX:n,actualSize:null===(s=this.context)||void 0===s?void 0:s.size}),this.tagImpress();const{scrollIntoView:r}=Object(l.b)(this.props.id,this.props.isInEditor,!0,this.carruselItemActive);if(this.timerRef.current=r(),!this.props.isInEditor)return this.setElementsNoFocusWithTab(),this.props.autoplay&&(this.io=new IntersectionObserver(this.callbackIntersect,{}),this.carouselRef.current&&this.io.observe(this.carouselRef.current),this.intervalRef.current&&clearInterval(this.intervalRef.current),this.intervalRef.current=setInterval(()=>{this.state.isVisible&&(this.state.onHover||this.handleAction("next"))},this.props.delay)),()=>{this.intervalRef.current&&clearInterval(this.intervalRef.current)}}componentWillUnmount(){this.intervalRef.current&&clearInterval(this.intervalRef.current),this.io&&this.io.unobserve(this.carouselRef.current),this.timerRef.current&&clearTimeout(this.timerRef.current)}componentDidUpdate(e,t,i){if(void 0!==this.props.activeIndexFromAuthorPanel)if(e.activeIndexFromAuthorPanel!==this.props.activeIndexFromAuthorPanel)this.setState({activeIndex:this.props.activeIndexFromAuthorPanel+1});else{e.cqItemsOrder.length!==this.props.cqItemsOrder.length&&this.setState({activeIndex:1})}}tagImpress(){var e;let t=(null===(e=this.props.cqItems[this.props.cqItemsOrder[this.state.activeIndex-1]])||void 0===e?void 0:e.id)||null;t&&(this.state.impression.includes(t)||(this.setState(e=>({impression:[...e.impression,t]})),this.props.cqItemsOrder.forEach((e,t)=>{if(t+1==this.state.activeIndex){let h=this.props.cqItems[e],v=h[":type"],u="",p="",m=""+(t+1);var i,s;if(null===v||void 0===v?void 0:v.includes("primarymodulev2"))u=(null===(i=h.primaryModuleV2)||void 0===i?void 0:i.title)?null===(s=h.primaryModuleV2)||void 0===s?void 0:s.title:"",p="Modulo primario v2";else if(null===v||void 0===v?void 0:v.includes("primarymodule")){var n,r;u=(null===(n=h.primaryModule)||void 0===n?void 0:n.title)?null===(r=h.primaryModule)||void 0===r?void 0:r.title:"",p="Modulo primario"}else if(null===v||void 0===v?void 0:v.includes("secondarymodule")){var a,l;u=(null===(a=h.secondaryModule)||void 0===a?void 0:a.title)?null===(l=h.secondaryModule)||void 0===l?void 0:l.title:"",p="Modulo secundario"}else if(null===v||void 0===v?void 0:v.includes("videomodule")){var c,d;u=(null===(c=h.videoModule)||void 0===c?void 0:c.title)?null===(d=h.videoModule)||void 0===d?void 0:d.title:"",p="Modulo de video"}Object(o.e)([p,u],"",m)}})))}renderContent(){var e,t;const i=(null===(e=this.props)||void 0===e||null===(t=e.appliedCssClassNames)||void 0===t?void 0:t.includes("cmp-carousel__padding-mobile"))?"cmp-carousel__padding-mobile":"";if(this.props.isInEditor)return n.a.createElement(n.a.Fragment,null,this.childComponents.map((e,t)=>{const s=this.state.activeIndex===t+1,r={display:s?"block":"none"};return n.a.createElement("div",{key:"carousel-content-"+t,className:`cmp-carousel__item ${i} ${s?"cmp-carousel__item--active":""} `,"data-cmp-index":t,role:"tabpanel","data-cmp-hook-carousel":"item","aria-hidden":s,style:r},e)}));{var s,r,a;const e=this.props.cqItemsOrder.length-1,t=this.childComponents[e],o=this.childComponents[0];return n.a.createElement("div",{className:"cmp-carousel__content",ref:this.containerRef,style:{transform:`translate3d(-${this.state.translateX}px, 0, 0)`},onTransitionEnd:()=>this.handleTransitionEnd(),onTouchStart:e=>this.handleTouchStart(e),onTouchMove:e=>this.handleTouchMove(e),onMouseEnter:()=>this.handleOnHover(),onMouseLeave:()=>this.handleOnHover(),"aria-label":this.props.accessibilityLabel},(null===(s=this.props.cqItemsOrder)||void 0===s?void 0:s.length)>1&&n.a.createElement("div",{className:"cmp-carousel__item "+i,role:"tabpanel","data-cmp-hook-carousel":"item",key:"clone-last-before",ref:this.initialElement,"aria-hidden":"true"},this.cloneElementWithUniqueId(t,"before")),null===(r=this.props.cqItemsOrder)||void 0===r?void 0:r.map((e,t)=>n.a.createElement("div",{className:"cmp-carousel__item "+i,role:"tabpanel","data-cmp-hook-carousel":"item",key:e},this.childComponents[t])),(null===(a=this.props.cqItemsOrder)||void 0===a?void 0:a.length)>1&&n.a.createElement("div",{className:"cmp-carousel__item "+i,role:"tabpanel","data-cmp-hook-carousel":"item",key:"clone-first-after",ref:this.lastElement,"aria-hidden":"true"},this.cloneElementWithUniqueId(o,"after")))}}renderNavegation(){var e,t;let i=(null===(e=this.props.cqItemsOrder)||void 0===e?void 0:e.length)>1;return n.a.createElement("ol",{className:"cmp-carousel__indicators"},i&&n.a.createElement("li",{className:"cmp-carousel__nav cmp-carousel__nav--left",tabIndex:0,onClick:()=>this.handleAction("prev"),onKeyPress:e=>this.handleKeyPress(e,-1)},n.a.createElement("i",{className:"icon-left_arrow"})),null===(t=this.props.cqItemsOrder)||void 0===t?void 0:t.map((e,t)=>{let i=t+1==this.state.activeIndex?"cmp-carousel__indicator--active":"";return n.a.createElement("li",{className:`cmp-carousel__indicator ${i} `,key:e+t,onClick:()=>this.handleClickNav(t+1)},t)}),i&&n.a.createElement("li",{className:"cmp-carousel__nav cmp-carousel__nav--rigth",tabIndex:0,onClick:()=>this.handleAction("next"),onKeyPress:e=>this.handleKeyPress(e,1)},n.a.createElement("i",{className:"icon-right_arrow"})))}render(){const e=Object(a.CarouselV1IsEmptyFn)(this.props);return n.a.createElement("div",{className:"cmp-carousel "+(this.props.appliedCssClassNames?this.props.appliedCssClassNames:""),role:"group","data-panelcontainer":"carousel","aria-roledescription":"carousel",ref:this.carouselRef,id:this.props.id},e&&this.props.isInEditor&&n.a.createElement("div",{class:"cq-Overlay--placeholder"},"Carousel Galicia"),this.renderContent(),this.renderNavegation(),this.placeholderComponent)}}t.default=Object(a.withStandardBaseCssClass)(Object(a.withAuthorPanelSwitch)(c),"cmp-carousel")}}]);
//# sourceMappingURL=15.03c48708.chunk.js.map